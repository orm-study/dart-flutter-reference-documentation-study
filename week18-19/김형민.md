
### 데브툴즈란 무엇인가?

DevTools는 Dart와 Flutter를 위한 성능 및 디버깅 도구 모음

Flutter DevTools와 Dart DevTools는 동일함

##### DevTools로 할 수 있는 작업들

- Flutter 앱의 UI 레이아웃과 상태를 검사
- Flutter 앱에서 UI 지연 성능 문제 진단
- Flutter 또는 Dart 앱의 CPU 프로파일링
- Flutter 앱의 네트워크 프로파일링
- Flutter 또는 Dart 앱의 소스 수준 디버깅
- Flutter 또는 Dart 커맨드라인 앱의 메모리 문제 디버깅
- 실행 중인 Flutter 또는 Dart 커맨드라인 앱의 일반 로그 및 진단 정보 보기
- 코드와 앱 크기 분석
- Android 앱에서 딥 링크 유효성 검사

DevTools는 기존의 IDE나 커맨드라인 기반 개발 워크플로와 함께 사용할 것을 권장함

##### 일반적인 문제 해결 방법

- Performance > Timeline : 구체적으로 어떤 코드가 늦은 프레임에 영향을 미치는지 감지
- CPU 프로파일러 : 백그라운드에서 CPU 시간을 가장 많이 차지하는 코드를 파악

### Flutter Inspector

- Flutter 위젯 인스펙터는 Flutter 위젯 트리를 시각화하고 탐색하는 도구

- Flutter 프레임워크는 텍스트, 버튼, 토글과 같은 컨트롤에서 센터링, 패딩, 행, 열과 같은 레이아웃까지 모든 것을 구성하는 핵심 빌딩 블록으로 위젯을 사용

- 인스펙터는 Flutter 위젯 트리를 시각화하고 탐색하는 데 도움을

- 기존 레이아웃 이해  

- 레이아웃 문제 진단

##### 위젯 검사

인터랙티브 위젯 트리를 탐색하여 주변 위젯을 보고 해당 필드 값을 확인

레이아웃 문제를 디버깅할 때 주목해야 할 주요 필드는 크기(size)와 제약(constraints) 필드

##### 레이아웃 익스플로러

Layout Explorer는 플렉스 레이아웃 과 고정 크기 레이아웃을 모두 지원

- 플렉스 레이아웃

	- Flex위젯과 그 자식이 어떻게 배치되는지 시각화

	 - 레이아웃 제약 조건 위반 및 렌더 오버플로 오류를 표시

##### 비쥬얼 디버깅

- 애니메이션 느리게 실행
- 가이드라인 보여줌
- 기준선 표시
- 박스에 테두리, 다시 그려질 때 색상 변경
- 너무 큰 이미지 알려줌

##### 디테일 트리

위젯의 세부 정보 트리를 보여줌

##### 위젯 생성 추적

위젯 트리를 보여줌

### Performance View

성능 페이지는 애플리케이션의 성능 문제와 UI 지연을 진단하는 데 도움

이 페이지는 애플리케이션의 활동에 대한 타이밍 및 성능 정보를 제공

앱의 성능 저하 원인을 식별하는 데 도움을 주는 여러 도구로 구성

- Flutter 프레임 차트 (Flutter 앱 전용)
- 프레임 분석 탭 (Flutter 앱 전용)
- 래스터 통계 탭 (Flutter 앱 전용)
- 타임라인 이벤트 추적 보기 (모든 네이티브 Dart 애플리케이션)
- 고급 디버깅 도구 (Flutter 앱 전용)

##### 플러터에서의 프레임

Flutter는 UI를 초당 60프레임(fps)으로 렌더링하도록 설계

120Hz 업데이트가 가능한 장치에서는 초당 120프레임으로 렌더링할 수 있음

각 렌더는 프레임이라고 불림

이는 약 16ms마다 UI가 애니메이션이나 UI의 다른 변경 사항을 반영하여 업데이트된다는 것을 의미

렌더링하는 데 16ms 이상 걸리는 프레임은 디스플레이 장치에서 지연(jank) 현상을 일으킴

### CPU profiler view

CPU 프로파일러 뷰는 Dart 또는 Flutter 애플리케이션의 세션을 기록하고 프로파일링할 수 있도록 해줌

프로파일러는 성능 문제를 해결하거나 일반적으로 앱의 CPU 활동을 이해하는 데 도움을 줄 수 있음

Dart VM은 CPU 샘플(특정 시점에서의 CPU 호출 스택 스냅샷)을 수집하고 데이터를 DevTools에 시각화하기 위해 전송

많은 CPU 샘플을 집계함으로써 프로파일러는 CPU가 가장 많은 시간을 소비하는 부분을 이해하는 데 도움을 줄 수 있음

### Memory view

메모리 뷰는 애플리케이션의 메모리 할당 세부 정보를 제공하고 특정 문제를 감지하고 디버깅하는 도구를 제공

메모리 뷰를 사용하는 이유

메모리 뷰는 사전 예방적 메모리 최적화를 위해 사용하거나 애플리케이션이 다음과 같은 조건 중 하나를 경험할 때 사용:

- 메모리가 부족할 때 크래시
- 속도 저하
- 장치가 느려지거나 응답하지 않음
- 운영 체제에 의해 적용된 메모리 제한을 초과하여 종료
- 메모리 사용 한도를 초과
    - 이 한도는 앱이 타겟으로 하는 장치 유형에 따라 달라질 수 있음
- 메모리 누수가 의심됨

##### 기본 메모리 개념

Dart 클래스 생성자(예: MyClass() 사용)를 통해 생성된 Dart 객체는 힙(heap)이라고 불리는 메모리 영역에 저장됨

힙의 메모리는 Dart VM(가상 머신)에 의해 관리됨

Dart VM은 객체가 생성되는 순간에 해당 객체를 위한 메모리를 할당하고, 객체가 더 이상 사용되지 않을 때 메모리를 해제(또는 비할당)함(자세한 내용은 Dart 가비지 컬렉션 참조).

### Debug console

DevTools 디버그 콘솔은 애플리케이션의 표준 출력(stdout)을 모니터링하고, 디버그 모드에서 일시 중지되거나 실행 중인 앱의 표현식을 평가하며, 객체의 수신 및 발신 참조를 분석할 수 있도록 해줌

디버그 콘솔은 인스펙터, 디버거 및 메모리 뷰에서 사용할 수 있음

### Network view

네트워크 뷰는 Dart 또는 Flutter 애플리케이션의 HTTP, HTTPS, 및 웹 소켓 트래픽을 검사할 수 있도록 해줌

### Debugger

DevTools에는 전체 소스 수준 디버거가 포함되어 있으며, 중단점 설정, 단계별 실행, 변수 검사 등의 기능을 지원

### logging view

로깅 뷰는 Dart 런타임, 애플리케이션 프레임워크(예: Flutter) 및 애플리케이션 수준의 로깅 이벤트를 표시

기본적으로 로깅 뷰는 다음을 표시

- Dart 런타임의 가비지 컬렉션 이벤트
- 프레임 생성 이벤트와 같은 Flutter 프레임워크 이벤트
- 애플리케이션의 stdout 및 stderr
- 애플리케이션의 사용자 정의 로깅 이벤트

### App size tool

앱 크기 도구는 애플리케이션의 총 크기를 분석할 수 있도록 해줌

분석 탭을 사용하여 "크기 정보"의 단일 스냅샷을 볼 수 있음

차이(Diff) 탭을 사용하여 "크기 정보"의 두 가지 다른 스냅샷을 비교할 수 있음

크기 정보는 Dart 코드, 네이티브 코드 및 애플리케이션 패키지, 자산, 글꼴과 같은 비코드 요소의 크기 데이터를 포함

크기 정보 파일은 애플리케이션 크기의 전체적인 데이터를 담고 있음

##### Dart 크기 정보

Dart AOT(Ahead-of-Time) 컴파일러는 애플리케이션을 컴파일할 때 코드에서 트리 쉐이킹(tree-shaking)을 수행(프로파일 모드 또는 릴리스 모드에서만—디버그 빌드에는 JIT(Just-in-Time) 컴파일러가 사용되므로 AOT 컴파일러는 사용되지 않음).

이는 컴파일러가 사용되지 않거나 도달할 수 없는 코드 조각을 제거하여 앱의 크기를 최적화하려고 한다는 의미

컴파일러가 가능한 한 코드를 최적화한 후 최종 결과는 바이너리 출력에 존재하는 패키지, 라이브러리, 클래스 및 함수의 모음과 해당 크기(바이트 단위)로 요약될 수 있음

이는 앱 크기 도구에서 Dart 코드를 추가로 최적화하고 크기 문제를 추적하기 위해 분석할 수 있는 크기 정보의 Dart 부분

### Devtools extensions

DevTools 확장 기능은 DevTools 도구 모음에 밀접하게 통합된 서드파티 패키지에서 제공하는 개발 도구

확장 기능은 pub 패키지의 일부로 배포되며, 사용자가 애플리케이션을 디버깅할 때 DevTools에 동적으로 로드됨

### Validate deep links

딥 링크 뷰는 앱에 정의된 모든 딥 링크의 유효성을 검사

이 도구는 웹사이트 구성에서 Android 매니페스트 파일에 이르기까지 Android 딥 링크 설정의 모든 오류를 식별하고 문제를 해결하는 데 도움

DevTools는 모든 문제를 해결하는 방법에 대한 지침을 제공하여 구현 프로세스를 더 쉽게 만듦

