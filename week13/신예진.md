### Flutter architectural overview
Flutter는 iOS와 Android 같은 운영 체제 간의 코드 재사용을 가능하게 하는 크로스 플랫폼 UI 툴킷입니다. Flutter 앱은 VM(가상 머신)에서 실행되어 상태 유지가 가능한 핫 리로드(Hot Reload)를 지원하며, 배포 시에는 기계 코드(Intel x64, ARM 명령어 또는 웹 대상일 경우 JavaScript)로 컴파일됩니다. 

Flutter의 구조는 레이어 모델로 설명되며, 각각의 레이어는 독립적이고 교체 가능하게 설계되어 있습니다. Flutter 애플리케이션은 플랫폼별로 적절한 언어(Java, C++, Objective-C 등)로 작성된 임베더(embedder)를 통해 각 플랫폼의 기본 서비스에 접근합니다. Flutter의 코어는 C++로 작성된 Flutter 엔진이며, 렌더링, 텍스트 레이아웃, 파일 I/O, 네트워크 I/O, 접근성 지원 등의 기능을 제공합니다.

- **레이어 모델**: Flutter는 각 레이어가 서로 독립적이며, 하위 레이어에 대한 특권이 없고, 모든 레이어가 교체 가능하도록 설계된 계층화된 시스템입니다.
- **임베더(embedder)**: 플랫폼에 맞게 작성된 엔트리 포인트로, 렌더링, 접근성, 입력 등을 관리하며, Android는 Java/C++, iOS는 Objective-C/Objective-C++로 작성됩니다.
- **Flutter 엔진**: 주로 C++로 작성되며, 텍스트 레이아웃, 그래픽 처리, 플러그인 아키텍처, Dart 런타임 등의 핵심 기능을 제공합니다.
- **dart**: Flutter 엔진의 C++ 코드를 Dart로 감싸는 라이브러리로, UI 관련 저수준 기능을 제공합니다.
- **Flutter 프레임워크**: Dart 언어로 작성된 반응형 UI 프레임워크로, 애니메이션, 페인팅, 제스처 처리 등을 담당하는 기본 클래스를 포함합니다. 또한, 렌더링 계층을 통해 레이아웃을 처리하며, **위젯 계층**을 통해 UI를 구성합니다.
- **Material 및 Cupertino 라이브러리**: Flutter는 iOS 디자인(Cupertino)과 Android 디자인(Material)을 따르는 라이브러리를 제공해 플랫폼별 UI 요소를 쉽게 구현할 수 있습니다.
- **서드파티 패키지**: Flutter 생태계는 카메라, 웹뷰 같은 플랫폼 플러그인부터 HTTP, 애니메이션과 같은 범용 기능을 지원하는 패키지가 있습니다.

 
### Flutter 앱의 계층:

1. **Dart 앱**:
    - 개발자가 직접 작성하는 코드로, 위젯을 구성해 원하는 UI를 만듭니다.
    - 비즈니스 로직을 구현합니다.
    - 앱 개발자가 소유.
2. **프레임워크 (소스 코드)**:
    - 고품질 앱을 만들기 위한 고수준 API를 제공합니다 (위젯, 히트 테스트, 제스처 감지, 접근성, 텍스트 입력 등).
    - 앱의 위젯 트리를 장면(scene)으로 합성합니다.
3. **엔진 (소스 코드)**:
    - 합성된 장면을 **래스터화**(rasterize)하는 역할을 담당합니다.
    - Flutter의 핵심 API (그래픽, 텍스트 레이아웃, Dart 런타임 등) 저수준 구현을 제공합니다.
    - `dart:ui` API를 통해 프레임워크에 기능을 노출합니다.
    - 엔진의 **임베더 API**를 사용해 특정 플랫폼과 통합됩니다.
4. **임베더 (소스 코드)**:
    - 렌더링 표면, 접근성, 입력 등 운영 체제 서비스와의 조율을 담당합니다.
    - 이벤트 루프를 관리합니다.
    - 플랫폼에 맞는 API를 노출해 임베더를 앱에 통합할 수 있도록 합니다.
5. **런너 (Runner)**:
    - 임베더의 플랫폼별 API로 노출된 요소를 조합해 대상 플랫폼에서 실행 가능한 앱 패키지를 구성합니다.
    - `flutter create`로 생성된 앱 템플릿의 일부이며, 개발자가 소유합니다.
  
### Reactive User Interfaces (리액티브 사용자 인터페이스)
Flutter는 전통적인 UI 프레임워크와 달리, UI와 상태를 명확히 분리한 리액티브 구조를 채택하여 복잡한 UI 변경을 간소화합니다. 이를 통해 상태 변경 시 UI를 쉽게 업데이트하며, Dart 언어의 성능을 활용해 빠르고 효율적인 UI 처리를 가능하게 합니다.



